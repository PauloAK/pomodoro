const FOCUS="focus",SHORT_BREAK="short-break",LONG_BREAK="long-break",IDLE="idle",TIMERS={[FOCUS]:12,[SHORT_BREAK]:12,[LONG_BREAK]:12},TIMER_LABELS={[FOCUS]:"Focus",[SHORT_BREAK]:"Short Break",[LONG_BREAK]:"Long Break"},TIMER_TITLES={[FOCUS]:"Focus Time!",[SHORT_BREAK]:"Take a Short Break!",[LONG_BREAK]:"Take a Long Break!"};var currentLoop=1,isRunning=!1,startMoment=null,defaultTitle=document.getElementsByTagName("title")[0].innerText,currentPomodoro=()=>Math.abs(currentLoop/10);function startTimer(){startMoment=new Date,isRunning=!0,setTimerSubText(getCurrentTimerText())}function cancelTimer(){startMoment=null,isRunning=!1,setRotation("0deg"),setTimerText(secondsToTimer(getCurrentTimer()||0)),setTimerSubText(getCurrentTimerText())}function nextLoop(){currentLoop++,cancelTimer()}function finishTimer(){playAlarm(),startMoment=null,isRunning=!1,currentLoop++,setTimerText("Finished!"),setTimerSubText("Continuing..."),toggleRingTransition(!1),setTimeout(()=>{setRotation("0deg"),setTimeout(()=>{toggleRingTransition(!0)},250)},250),setTimeout(()=>{startTimer()},1e3)}function tickTimer(){var e=getCurrentTimer();if(!isRunning)return updateUI(e,0),!1;var t=Math.abs(((new Date).getTime()-startMoment.getTime())/1e3);e<=t?finishTimer():updateUI(e,t)}function updateUI(e,t){var l=getCurrentTimerIdentifier(),n=secondsToTimer(e-t),s=timeToPercentual(e,t);switch(setRotation(timeToDeg(e,t)),setTimerText(n),setTitle(isRunning?`ðŸ•‘ ${n} - ${TIMER_TITLES[l]} | ${defaultTitle.trim()}`:defaultTitle),document.getElementsByClassName("timer")[0].classList=`timer ${l}`,l){case FOCUS:(currentLoop+1)%10==0?(document.getElementById("labelFocus2").style.setProperty("--fill",`${s}%`),document.getElementById("labelFocus2").classList="label active",document.getElementById("labelFocus").style.setProperty("--fill","100%"),document.getElementById("labelFocus").classList="label completed",document.getElementById("labelShort").style.setProperty("--fill","100%"),document.getElementById("labelShort").classList="label completed"):(document.getElementById("labelFocus").style.setProperty("--fill",`${s}%`),document.getElementById("labelFocus").classList="label active",document.getElementById("labelShort").style.setProperty("--fill","0%"),document.getElementById("labelShort").classList="label",document.getElementById("labelFocus2").style.setProperty("--fill","0%"),document.getElementById("labelFocus2").classList="label"),document.getElementById("labelLong").style.setProperty("--fill","0%"),document.getElementById("labelLong").classList="label";break;case SHORT_BREAK:document.getElementById("labelFocus").style.setProperty("--fill","100%"),document.getElementById("labelFocus").classList="label completed",document.getElementById("labelShort").style.setProperty("--fill",`${s}%`),document.getElementById("labelShort").classList="label active",document.getElementById("labelLong").style.setProperty("--fill","0%"),document.getElementById("labelLong").classList="label";break;case LONG_BREAK:document.getElementById("labelFocus").style.setProperty("--fill","100%"),document.getElementById("labelFocus").classList="label completed",document.getElementById("labelShort").style.setProperty("--fill","100%"),document.getElementById("labelShort").classList="label completed",document.getElementById("labelFocus2").style.setProperty("--fill","100%"),document.getElementById("labelFocus2").classList="label completed",document.getElementById("labelLong").style.setProperty("--fill",`${s}%`),document.getElementById("labelLong").classList="label active"}}function secondsToTimer(e){let t="",l=new Date(0);return l.setHours(0),l.setMinutes(0),l.setSeconds(e),l.getHours()&&(t+=("0"+l.getHours()).slice(-2)+":"),t+=("0"+l.getMinutes()).slice(-2)+":"+("0"+l.getSeconds()).slice(-2),t}function timeToPercentual(e,t,l=!1){return 100*t/e/(l?100:1)}function timeToDeg(e,t){return 360*timeToPercentual(e,t,!0)+"deg"}function toggleRingTransition(e=!0){e?document.getElementsByClassName("marker")[0].classList.remove("no-transition"):document.getElementsByClassName("marker")[0].classList.add("no-transition")}function playAlarm(){new Audio("/audio/alarm.mp3").play()}function getCurrentTimerIdentifier(){return currentLoop%10==0?LONG_BREAK:currentLoop%2==0?SHORT_BREAK:FOCUS}function getCurrentTimer(){return TIMERS[getCurrentTimerIdentifier()]}function getCurrentTimerText(){return TIMER_LABELS[getCurrentTimerIdentifier()]}function setRotation(e){document.getElementsByClassName("timer")[0].style.setProperty("--rotation",e)}function setTimerText(e){document.getElementsByClassName("clock")[0].innerText=e}function setTimerSubText(e){document.getElementsByClassName("subText")[0].innerText=e}function setTitle(e){document.getElementsByTagName("title")[0].innerText=e}setTimerText(secondsToTimer(getCurrentTimer()||0)),setTimerSubText(getCurrentTimerText()),window.timerInterval=setInterval(()=>{tickTimer()},100);