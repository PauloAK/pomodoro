var Main=function(){function e(){var e=this;this.originalTitle=document.getElementsByTagName("title")[0].innerText.trim(),this.onTick=function(){e.updateUI()},this.focusSection={identifier:"focus",seconds:1500,label:"Focus",title:"Focus Time!"},this.shortBreakSection={identifier:"short-break",seconds:300,label:"Short Break",title:"Take a Short Break!"},this.longBreakSection={identifier:"long-break",seconds:900,label:"Long Break",title:"Take a Long Break!"},this.pomodoro=new Pomodoro(this.focusSection,this.shortBreakSection,this.longBreakSection,this.onTick)}return e.prototype.updateUI=function(){this.updateTitle(),this.updateTimerText(),this.updateProgressBars()},e.prototype.updateTitle=function(){function e(e){document.getElementsByTagName("title")[0].innerText=e}var t=this.pomodoro.remainingTime(),o=this.pomodoro.getSection();this.pomodoro.isRunning()?e("üïë "+t+" - "+o.title+" | "+this.originalTitle):this.pomodoro.isPaused()?e("‚è∏Ô∏è "+t+" [Paused] - "+o.title+" | "+this.originalTitle):e(this.originalTitle)},e.prototype.updateProgressBars=function(){var e,n=this;e=this.pomodoro.timer().elapsedDeg(),document.getElementsByClassName("timer")[0].style.setProperty("--rotation",e),function(){var e=n.pomodoro.timer().elapsedPercentual(),t=n.pomodoro.getSection(),o=n.pomodoro.currentSectionID();switch(document.getElementsByClassName("timer")[0].classList.value="timer "+t.identifier,t){case n.focusSection:(o+1)%10==0?(document.getElementById("labelFocus2").style.setProperty("--fill",e+"%"),document.getElementById("labelFocus2").classList.value="label active",document.getElementById("labelFocus").style.setProperty("--fill","100%"),document.getElementById("labelFocus").classList.value="label completed",document.getElementById("labelShort").style.setProperty("--fill","100%"),document.getElementById("labelShort").classList.value="label completed"):(document.getElementById("labelFocus").style.setProperty("--fill",e+"%"),document.getElementById("labelFocus").classList.value="label active",document.getElementById("labelShort").style.setProperty("--fill","0%"),document.getElementById("labelShort").classList.value="label",document.getElementById("labelFocus2").style.setProperty("--fill","0%"),document.getElementById("labelFocus2").classList.value="label"),document.getElementById("labelLong").style.setProperty("--fill","0%"),document.getElementById("labelLong").classList.value="label";break;case n.shortBreakSection:document.getElementById("labelFocus").style.setProperty("--fill","100%"),document.getElementById("labelFocus").classList.value="label completed",document.getElementById("labelShort").style.setProperty("--fill",e+"%"),document.getElementById("labelShort").classList.value="label active",document.getElementById("labelLong").style.setProperty("--fill","0%"),document.getElementById("labelLong").classList.value="label";break;case n.longBreakSection:document.getElementById("labelFocus").style.setProperty("--fill","100%"),document.getElementById("labelFocus").classList.value="label completed",document.getElementById("labelShort").style.setProperty("--fill","100%"),document.getElementById("labelShort").classList.value="label completed",document.getElementById("labelFocus2").style.setProperty("--fill","100%"),document.getElementById("labelFocus2").classList.value="label completed",document.getElementById("labelLong").style.setProperty("--fill",e+"%"),document.getElementById("labelLong").classList.value="label active"}}(this.pomodoro.timer().elapsedPercentual())},e.prototype.updateTimerText=function(){document.getElementsByClassName("clock")[0].innerText=this.pomodoro.remainingTime()},e}(),Pomodoro=function(){function e(e,t,o,n){void 0===n&&(n=null),this._currentSectionID=1,this._timer=null,this._onTick=null,this._focus=e,this._shortBreak=t,this._longBreak=o,this._timer=new Timer(this.getSection())}return e.prototype.currentPomodoro=function(){return Math.floor(this._currentSectionID/10)},e.prototype.getSection=function(e){e=(e=void 0===e?null:e)||this._currentSectionID;return e%10==0?this._longBreak:e%2==0?this._shortBreak:this._focus},e.prototype.tick=function(){var e=this;null!=this._onTick&&(window.pomodoroTick=setInterval(function(){e._onTick()},500))},e.prototype.start=function(){this._timer.start()},e.prototype.pause=function(){this._timer.pause()},e.prototype.reset=function(){this._timer.reset()},e.prototype.next=function(){this._currentSectionID++,this.reset()},e.prototype.isPaused=function(){return this._timer.isPaused()},e.prototype.isRunning=function(){return this._timer.isRunning()},e.prototype.remainingTime=function(){return this._timer.remainingTimeFormated()},e.prototype.timer=function(){return this._timer},e.prototype.currentSectionID=function(){return this._currentSectionID},e}(),Timer=function(){function e(e){this._startMoment=null,this._pauseMoment=null,this._isRunning=!1,this._isPaused=!1,this._acumulatedPausedSeconds=0,this._seconds=null,this._seconds=e}return e.prototype.start=function(){this._pauseMoment=null,this._acumulatedPausedSeconds=0,this._startMoment=new Date,this._isRunning=!0},e.prototype.pause=function(){this._isPaused?(this._acumulatedPausedSeconds+=this.timeDiff(this._pauseMoment),this._pauseMoment=null,this._isPaused=!1):(this._pauseMoment=new Date,this._isPaused=!0)},e.prototype.reset=function(){this._pauseMoment=null,this._startMoment=null,this._isRunning=!1,this._isPaused=!1},e.prototype.elapsedSeconds=function(){return this._seconds-this.remainingSeconds()-this._acumulatedPausedSeconds},e.prototype.remainingSeconds=function(){return this.timeDiff(this._startMoment)-this._acumulatedPausedSeconds},e.prototype.remainingTimeFormated=function(){var e="",t=new Date(0);return t.setHours(0),t.setMinutes(0),t.setSeconds(this.remainingSeconds()),t.getHours()&&(e+=("0"+t.getHours()).slice(-2)+":"),e+=("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)},e.prototype.elapsedPercentual=function(e){return void 0===e&&(e=!1),100*this.elapsedSeconds()/this._seconds/(e?100:1)},e.prototype.elapsedDeg=function(){return 360*this.elapsedPercentual(!0)+"deg"},e.prototype.timeDiff=function(e){return Math.abs(((new Date).getTime()-e.getTime())/1e3)},e.prototype.isPaused=function(){return this._isRunning&&this._isPaused},e.prototype.isRunning=function(){return this._isRunning&&!this._isPaused},e}();