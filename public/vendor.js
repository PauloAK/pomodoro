var Main=function(){function e(){var e=this;this.originalTitle=document.getElementsByTagName("title")[0].innerText.trim(),this.onTick=function(){e.updateUI()},this.onFinish=function(){e.playAlarm(),e.notifyEndSection(),window.setTimeout(function(){e.pomodoro.start()},1e3)},this.focusSection={identifier:"focus",seconds:15,label:"Focus",title:"Focus Time!"},this.shortBreakSection={identifier:"short-break",seconds:30,label:"Short Break",title:"Take a Short Break!"},this.longBreakSection={identifier:"long-break",seconds:9,label:"Long Break",title:"Take a Long Break!"},this.pomodoro=new Pomodoro(this.focusSection,this.shortBreakSection,this.longBreakSection,this.onTick,this.onFinish)}return e.prototype.updateUI=function(){this.updateTitle(),this.updateTimerText(),this.updateProgressBars()},e.prototype.updateTitle=function(){function e(e){document.getElementsByTagName("title")[0].innerText=e}var t=this.pomodoro.remainingTime(),o=this.pomodoro.getSection();this.pomodoro.isRunning()?e("üïë "+t+" - "+o.title+" | "+this.originalTitle):this.pomodoro.isPaused()?e("‚è∏Ô∏è "+t+" [Paused] - "+o.title+" | "+this.originalTitle):e(this.originalTitle)},e.prototype.updateProgressBars=function(){var e,i=this;e=this.pomodoro.timer().elapsedDeg(),document.getElementsByClassName("timer")[0].style.setProperty("--rotation",e),function(){var e=i.pomodoro.timer().elapsedPercentual(),t=i.pomodoro.getSection(),o=i.pomodoro.currentSectionID();switch(document.getElementsByClassName("timer")[0].classList.value="timer "+t.identifier,t){case i.focusSection:(o+1)%10==0?(document.getElementById("labelFocus2").style.setProperty("--fill",e+"%"),document.getElementById("labelFocus2").classList.value="label active",document.getElementById("labelFocus").style.setProperty("--fill","100%"),document.getElementById("labelFocus").classList.value="label completed",document.getElementById("labelShort").style.setProperty("--fill","100%"),document.getElementById("labelShort").classList.value="label completed"):(document.getElementById("labelFocus").style.setProperty("--fill",e+"%"),document.getElementById("labelFocus").classList.value="label active",document.getElementById("labelShort").style.setProperty("--fill","0%"),document.getElementById("labelShort").classList.value="label",document.getElementById("labelFocus2").style.setProperty("--fill","0%"),document.getElementById("labelFocus2").classList.value="label"),document.getElementById("labelLong").style.setProperty("--fill","0%"),document.getElementById("labelLong").classList.value="label";break;case i.shortBreakSection:document.getElementById("labelFocus").style.setProperty("--fill","100%"),document.getElementById("labelFocus").classList.value="label completed",document.getElementById("labelShort").style.setProperty("--fill",e+"%"),document.getElementById("labelShort").classList.value="label active",document.getElementById("labelLong").style.setProperty("--fill","0%"),document.getElementById("labelLong").classList.value="label";break;case i.longBreakSection:document.getElementById("labelFocus").style.setProperty("--fill","100%"),document.getElementById("labelFocus").classList.value="label completed",document.getElementById("labelShort").style.setProperty("--fill","100%"),document.getElementById("labelShort").classList.value="label completed",document.getElementById("labelFocus2").style.setProperty("--fill","100%"),document.getElementById("labelFocus2").classList.value="label completed",document.getElementById("labelLong").style.setProperty("--fill",e+"%"),document.getElementById("labelLong").classList.value="label active"}}(this.pomodoro.timer().elapsedPercentual())},e.prototype.updateTimerText=function(){document.getElementsByClassName("clock")[0].innerText=this.pomodoro.remainingTime()},e.prototype.playAlarm=function(){new Audio("/audio/alarm.mp3").play()},e.prototype.notifyEndSection=function(){var e=this.pomodoro.getSection(this.pomodoro.currentSectionID()-1),t=this.pomodoro.getSection();new Notification(e.label+" [Completed]",{body:t.title+" "+t.seconds/60+" minutes"})},e}(),Pomodoro=function(){function e(e,t,o,i,n){void 0===i&&(i=null),void 0===n&&(n=null),this._currentSectionID=1,this._timer=null,this._onTick=null,this._onFinish=null,this._focus=e,this._shortBreak=t,this._longBreak=o,this._onTick=i,this._onFinish=n,this._timer=new Timer(this.getSection().seconds),this.tick()}return e.prototype.currentPomodoro=function(){return Math.floor(this._currentSectionID/10)},e.prototype.getSection=function(e){e=(e=void 0===e?null:e)||this._currentSectionID;return e%10==0?this._longBreak:e%2==0?this._shortBreak:this._focus},e.prototype.tick=function(){var e=this;window.pomodoroTick=setInterval(function(){e.timer().isFinished()&&(e.next(),null!=e._onFinish&&e._onFinish()),null!=e._onTick&&e._onTick()},100)},e.prototype.start=function(){this._timer.start()},e.prototype.pause=function(){this._timer.pause()},e.prototype.reset=function(){this._timer.reset()},e.prototype.next=function(){this._currentSectionID++,this._timer=new Timer(this.getSection().seconds),this.reset()},e.prototype.isPaused=function(){return this._timer.isPaused()},e.prototype.isRunning=function(){return this._timer.isRunning()},e.prototype.remainingTime=function(){return this._timer.remainingTimeFormated()},e.prototype.timer=function(){return this._timer},e.prototype.currentSectionID=function(){return this._currentSectionID},e}(),Timer=function(){function e(e){this._startMoment=null,this._pauseMoment=null,this._isRunning=!1,this._isPaused=!1,this._acumulatedPausedSeconds=0,this._seconds=null,this._seconds=e}return e.prototype.start=function(){this._pauseMoment=null,this._acumulatedPausedSeconds=0,this._startMoment=new Date,this._isRunning=!0},e.prototype.pause=function(){this._isPaused?(this._acumulatedPausedSeconds+=this.timeDiff(this._pauseMoment),this._pauseMoment=null,this._isPaused=!1):(this._pauseMoment=new Date,this._isPaused=!0)},e.prototype.reset=function(){this._pauseMoment=null,this._startMoment=null,this._isRunning=!1,this._isPaused=!1,this._acumulatedPausedSeconds=0},e.prototype.elapsedSeconds=function(){return this._seconds-this.remainingSeconds()},e.prototype.remainingSeconds=function(){var e=this._seconds-(this.timeDiff(this._startMoment)-this.calculatePausedTime());return 0<=e?e:0},e.prototype.calculatePausedTime=function(){return this._acumulatedPausedSeconds+(this.isPaused()?this.timeDiff(this._pauseMoment):0)},e.prototype.remainingTimeFormated=function(){var e="",t=new Date(0);return t.setHours(0),t.setMinutes(0),t.setSeconds(this.remainingSeconds()),t.getHours()&&(e+=("0"+t.getHours()).slice(-2)+":"),e+=("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)},e.prototype.elapsedPercentual=function(e){return void 0===e&&(e=!1),100*this.elapsedSeconds()/this._seconds/(e?100:1)},e.prototype.elapsedDeg=function(){return 360*this.elapsedPercentual(!0)+"deg"},e.prototype.timeDiff=function(e){return e?Math.abs(((new Date).getTime()-e.getTime())/1e3):0},e.prototype.isPaused=function(){return this._isRunning&&this._isPaused},e.prototype.isRunning=function(){return this._isRunning&&!this._isPaused},e.prototype.isFinished=function(){return this.isRunning()&&!this.isPaused()&&this.elapsedSeconds()>=this._seconds},e}();